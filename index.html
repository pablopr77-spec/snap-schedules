<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sleek SNAP Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --cloud-dancer: #F0EEE9;
            --true-ink: #141414;
            --electric-blue: #3B7BFF;
        }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--cloud-dancer);
            color: var(--true-ink);
        }
        .bento-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .bento-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.04);
        }
        .day-chip {
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.75rem;
            transition: all 0.2s ease;
        }
        .day-active {
            background: var(--true-ink);
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .day-inactive {
            background: rgba(0,0,0,0.03);
            color: rgba(0,0,0,0.3);
        }
        .day-empty {
            visibility: hidden;
        }
        .weekday-label {
            text-align: center;
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            opacity: 0.3;
            padding-bottom: 8px;
        }
        select, input {
            background: rgba(255, 255, 255, 0.5) !important;
            border: 1px solid rgba(0,0,0,0.08) !important;
            backdrop-filter: blur(4px);
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 10px; }
    </style>
</head>
<body class="p-4 md:p-12">

    <div class="max-w-5xl mx-auto">
        <header class="mb-12 flex flex-col md:flex-row md:items-end justify-between gap-4">
            <div>
                <span class="text-xs font-bold tracking-[0.2em] uppercase opacity-50 mb-2 block">Snap Benefits</span>
                <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">Funds Deposit Dates</h1>
            </div>
            <div id="summary-pill" class="hidden animate-fade-in">
                <div class="bg-white/50 border border-black/5 px-4 py-2 rounded-full flex items-center gap-3 shadow-sm">
                    <div class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></div>
                    <span id="active-state-name" class="text-sm font-semibold italic text-slate-600">Global Data Mode</span>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
            <div class="md:col-span-4 space-y-6">
                <div class="bento-card p-6 md:p-8">
                    <h2 class="text-lg font-bold mb-6 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-1 6H9l-1 1H4a2 2 0 00-2 2zm9-7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>
                        Parameters
                    </h2>
                    
                    <div class="space-y-5">
                        <div class="group">
                            <label class="block text-[10px] font-bold uppercase tracking-widest opacity-40 mb-2">Jurisdiction</label>
                            <select id="stateSelect" class="w-full p-4 rounded-xl outline-none focus:ring-2 focus:ring-black transition-all cursor-pointer appearance-none">
                                <option value="">Select Region</option>
                            </select>
                        </div>

                        <div class="group">
                            <label class="block text-[10px] font-bold uppercase tracking-widest opacity-40 mb-2">Observation Window</label>
                            <div class="space-y-3">
                                <input type="date" id="startInput" class="w-full p-4 rounded-xl outline-none text-sm">
                                <input type="date" id="endInput" class="w-full p-4 rounded-xl outline-none text-sm">
                            </div>
                        </div>

                        <!-- Button text color changed to a specific dark gray (slate-500) -->
                        <button id="calcBtn" class="w-full bg-true-ink text-slate-500 py-4 rounded-2xl font-bold tracking-tight hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl shadow-black/10 mt-4">
                            Analyze Range
                        </button>
                    </div>
                </div>

                <div id="stat-card" class="bento-card p-6 opacity-0 translate-y-4 transition-all duration-700">
                    <p class="text-[10px] font-bold uppercase tracking-widest opacity-40 mb-1">Impact Density</p>
                    <div class="flex items-baseline gap-2">
                        <span id="big-count" class="text-5xl font-extrabold tracking-tighter">0</span>
                        <span class="font-semibold text-slate-500">Days</span>
                    </div>
                    <p id="logic-desc" class="text-xs leading-relaxed mt-3 opacity-60"></p>
                </div>
            </div>

            <div class="md:col-span-8">
                <div id="calendar-grid" class="space-y-8 min-h-[400px]">
                    <div class="flex flex-col items-center justify-center h-full pt-20 opacity-20">
                        <svg class="w-16 h-16 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        <p class="font-medium text-center">Define parameters to visualize<br>the Sun-Sat timeline</p>
                    </div>
                </div>
            </div>
        </div>

        <footer class="mt-16 pt-8 border-t border-black/5 flex flex-col md:flex-row justify-between items-center gap-4 text-[10px] font-medium uppercase tracking-[0.1em] opacity-40">
            <div>&copy; 2026 Benefit Analytics Systems</div>
            <div class="flex gap-6">
                <span>Privacy First</span>
                <span>No User Tracking</span>
                <span>State API v4.2</span>
            </div>
        </footer>
    </div>

<script>
    const rules = {
        "Alabama": [4, 23], "Alaska": [1, 1], "Arizona": [1, 13], "Arkansas": [4, 13], 
        "California": [1, 10], "Colorado": [1, 10], "Connecticut": [1, 3], "Delaware": [2, 23], 
        "Florida": [1, 28], "Georgia": [5, 23], "Guam": [1, 10], "Hawaii": [3, 5], 
        "Idaho": [1, 10], "Illinois": [1, 10], "Indiana": [5, 23], "Iowa": [1, 10], 
        "Kansas": [1, 10], "Kentucky": [1, 19], "Louisiana": [1, 23], "Maine": [10, 14], 
        "Maryland": [4, 23], "Massachusetts": [1, 14], "Michigan": [3, 21], "Minnesota": [4, 13], 
        "Mississippi": [4, 21], "Missouri": [1, 22], "New York": [1, 9], "North Carolina": [3, 21], 
        "Ohio": [2, 20], "Pennsylvania": [3, 14], "Puerto Rico": [4, 22], "Texas": [1, 28], 
        "Virginia": [1, 7], "Washington": [1, 20]
    };

    const sel = document.getElementById('stateSelect');
    Object.keys(rules).sort().forEach(s => {
        const o = document.createElement('option');
        o.value = s; o.textContent = s;
        sel.appendChild(o);
    });

    document.getElementById('calcBtn').addEventListener('click', () => {
        const state = sel.value;
        const startRaw = document.getElementById('startInput').value;
        const endRaw = document.getElementById('endInput').value;

        if (!state || !startRaw || !endRaw) return;

        const start = new Date(startRaw + "T00:00:00");
        const end = new Date(endRaw + "T23:59:59");

        document.getElementById('summary-pill').classList.remove('hidden');
        document.getElementById('active-state-name').textContent = state;
        document.getElementById('stat-card').style.opacity = '1';
        document.getElementById('stat-card').style.transform = 'translateY(0)';

        renderCalendar(start, end, state);
    });

    function renderCalendar(start, end, state) {
        const grid = document.getElementById('calendar-grid');
        grid.innerHTML = '';
        
        const range = rules[state];
        let totalActive = 0;
        
        // Iterator for months
        let currentMonthIter = new Date(start.getFullYear(), start.getMonth(), 1);
        const lastMonthIter = new Date(end.getFullYear(), end.getMonth(), 1);

        while (currentMonthIter <= lastMonthIter) {
            const monthWrapper = document.createElement('div');
            monthWrapper.className = 'bento-card p-6 md:p-8 animate-fade-in';
            
            const monthLabel = currentMonthIter.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            // Calendar Math
            const firstDayIndex = currentMonthIter.getDay(); // 0 (Sun) to 6 (Sat)
            const daysInMonth = new Date(currentMonthIter.getFullYear(), currentMonthIter.getMonth() + 1, 0).getDate();
            
            let daysHtml = '';
            
            // Add Empty Padding
            for(let p = 0; p < firstDayIndex; p++) {
                daysHtml += `<div class="day-chip day-empty"></div>`;
            }

            // Add Actual Days
            for (let i = 1; i <= daysInMonth; i++) {
                const checkDate = new Date(currentMonthIter.getFullYear(), currentMonthIter.getMonth(), i);
                let isActive = i >= range[0] && i <= range[1];
                
                // State specifics
                if (state === "Puerto Rico" && i % 2 !== 0) isActive = false;
                if (state === "Hawaii" && ![3, 5].includes(i)) isActive = false;

                const isOutOfRange = checkDate < start || checkDate > end;
                if (isActive && !isOutOfRange) totalActive++;

                daysHtml += `<div class="day-chip ${isActive && !isOutOfRange ? 'day-active' : 'day-inactive'}">${i}</div>`;
            }

            monthWrapper.innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-extrabold text-xl tracking-tight">${monthLabel}</h3>
                    <span class="text-[10px] font-bold opacity-30 tracking-widest uppercase">Sun - Sat Grid</span>
                </div>
                <div class="grid grid-cols-7 gap-2">
                    <div class="weekday-label text-red-500/80">S</div>
                    <div class="weekday-label">M</div>
                    <div class="weekday-label">T</div>
                    <div class="weekday-label">W</div>
                    <div class="weekday-label">T</div>
                    <div class="weekday-label">F</div>
                    <div class="weekday-label">S</div>
                    ${daysHtml}
                </div>
            `;
            grid.appendChild(monthWrapper);
            currentMonthIter.setMonth(currentMonthIter.getMonth() + 1);
        }

        document.getElementById('big-count').textContent = totalActive;
        document.getElementById('logic-desc').textContent = `${state} distributes benefits from the ${range[0]}${getSuffix(range[0])} to the ${range[1]}${getSuffix(range[1])} each month.`;
    }

    function getSuffix(i) {
        var j = i % 10, k = i % 100;
        if (j == 1 && k != 11) return "st";
        if (j == 2 && k != 12) return "nd";
        if (j == 3 && k != 13) return "rd";
        return "th";
    }
</script>

</body>
</html>
